open import "std/std.bfml"
open import "std/counter.bfml"

let main = [
  **gen_build @@ fun cnt -> $

  *gen_print cnt
  *IO:gen_puts "\n"

  $build { a }
  + a 123
  *Ctrl:gen_repeat a [ *gen_incr cnt ]
  *gen_print cnt
  *IO:gen_puts "\n"

  *gen_reset cnt
  *gen_print cnt
  *IO:gen_puts "\n"

  $build { a }
  + a 4
  *Ctrl:gen_repeat a [ *gen_incr cnt ]
  *gen_print cnt
]